{% extends 'hrms_app/base.html' %}
{% block title %} Modifica Dipendenti {% endblock title %}
{% block content %}

<style>
    /* Impostiamo un'altezza massima per la card e abilitiamo lo scroll */
    .card-body {
        overflow-y: auto;  /* Abilita lo scroll verticale */
    }
    /* Garantiamo che il footer stia sempre in fondo */
    footer {
        margin-top: 5px; /* Separazione dal contenuto */
    }
</style>

{% if messages %}
        {% for message in messages %}
            <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}


<div class="container mt-5">
    <div class="card">
        <div class="card-header">
            <h3>Dettagli Dipendente</h3>
        </div>
        <div class="card-body">
            <form>
                {% csrf_token %}
                <!-- Nome -->
                <div class="mb-3 row">
                    <label for="nome" class="col-sm-2 col-form-label">Nome</label>
                    <div class="col-sm-10">
                        {{ form.first_name}}
                    </div>
                </div>
                
                <!-- Cognome -->
                <div class="mb-3 row">
                    <label for="cognome" class="col-sm-2 col-form-label">Cognome</label>
                    <div class="col-sm-10">
                        {{ form.last_name}}
                    </div>
                </div>

                <div class="mb-3 row">
                    <label for="data_nascita" class="col-sm-2 col-form-label">Data di Nascita</label>
                    <div class="col-sm-10">
                        {{ form.data_nascita}}
                    </div>
                </div>

                <!-- Codice Fiscale -->
                <div class="mb-3 row">
                    <label for="codice_fiscale" class="col-sm-2 col-form-label">Codice Fiscale</label>
                    <div class="col-sm-10">
                        {{ form.codice_fiscale}}
                    </div>
                </div>

                <!-- Email -->
                <div class="mb-3 row">
                    <label for="email" class="col-sm-2 col-form-label">Email</label>
                    <div class="col-sm-10">
                        {{ form.email}}
                    </div>
                </div>

                <!-- Indirizzo -->
                <div class="mb-3 row">
                    <label for="indirizzo" class="col-sm-2 col-form-label">Indirizzo</label>
                    <div class="col-sm-10">
                        {{ form.indirizzo_completo}}
                    </div>
                </div>

                <!-- Telefono -->
                <div class="mb-3 row">
                    <label for="telefono" class="col-sm-2 col-form-label">Telefono</label>
                    <div class="col-sm-10">
                        {{ form.telefono}}
                    </div>
                </div>

                <!-- Ruolo -->
                <div class="mb-3 row">
                    <label for="ruolo" class="col-sm-2 col-form-label">Ruolo</label>
                    <div class="col-sm-10">
                        {{ form.ruolo }}
                    </div>
                </div>

                <!-- Responsabile -->
                <div class="mb-3 row">
                    <label for="responsabile" class="col-sm-2 col-form-label">Responsabile</label>
                    <div class="col-sm-10">
                        {{ form.superiore }}
                    </div>
                </div>

                <!-- Data di assunzione -->
                <div class="mb-3 row">
                    <label for="data_assunzione" class="col-sm-2 col-form-label">Data di Assunzione</label>
                    <div class="col-sm-10">
                        {{ form.data_assunzione }}
                    </div>
                </div>

                 <!-- Stipendio -->
                <div class="mb-3 row">
                    <label for="stipendio" class="col-sm-2 col-form-label">Stipendio</label>
                    <div class="col-sm-10">
                        {{ form.stipendio }}
                    </div>
                </div>

                <!-- Pulsanti per modifica e eliminazione -->
                <div class="text-center mt-3">
                    <button type="button" class="btn btn-warning" id="btn-modifica">Modifica</button>
                    <button type="button" class="btn btn-success" id="btn-aggiorna" style="display:none;">Aggiorna</button>
                    <button type="button" class="btn btn-danger" id="btn-elimina">Elimina</button>
                </div>
            </form>
        </div>
    </div>
</div>


<script>
 document.getElementById('btn-modifica').addEventListener('click', function () {
    const inputs = document.querySelectorAll('input');
    inputs.forEach(input => {
        input.disabled = false;
    });
    document.getElementById('btn-aggiorna').style.display = 'inline-block'; // Mostra il bottone "Aggiorna"
    document.getElementById('btn-modifica').style.display = 'none'; // Nasconde il bottone "Modifica"
});

// Funzione per eliminare il dipendente e pulire i campi
document.getElementById('btn-elimina').addEventListener('click', function () {
    if (confirm("Sei sicuro di voler eliminare questo dipendente?")) {
        // Pulisce i campi
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            input.value = ''; // Pulisce il valore del campo
            input.disabled = true; // Disabilita i campi
        });

        // Mostra un messaggio di conferma
        alert("Dipendente eliminato e campi puliti!");
    }
});

// Funzione per aggiornare i dati
document.getElementById('btn-aggiorna').addEventListener('click', function () {
    // Qui aggiungi la logica per inviare i dati aggiornati al server (ad esempio con una chiamata AJAX)
    alert("Modifiche aggiornate correttamente!");
    
    // Disabilita i campi dopo l'aggiornamento
    const inputs = document.querySelectorAll('input');
    inputs.forEach(input => {
        input.disabled = true;
    });
    
    // Nascondi il bottone "Aggiorna" e mostra di nuovo "Modifica"
    document.getElementById('btn-aggiorna').style.display = 'none';
    document.getElementById('btn-modifica').style.display = 'inline-block';
});
</script> 


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>



{% endblock %} 